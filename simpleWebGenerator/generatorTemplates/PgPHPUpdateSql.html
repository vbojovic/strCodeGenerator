<script type="text/html" id="user_tmpl">
<!-- 
    mroam imat kod updejta i ID i sva ostala polja . neautoinkrementirajuci i PKey polja
    ona koja se automatski psotavljaju mine trebaju
-->
    <pre>
       <code>
           
<ol  >       
    <li>class ProjectSql{</li>
    <li>    var $db=new DatabaseConnection();</li>
<% for ( var i = 0; i < selectedTables.length; i++ ) {           %> 
<%     var schemaName=selectedTables[i].schema;              %>
<%     var tableName=selectedTables[i].table;                %>
<%     var attribsInPkey=generator.getPkeyFieldNames(schemaName,tableName); %>
<%     var attribsInPkeyJoined=attribsInPkey.join(','); %>
<%     var phpArgsPkey = genericHelper.joinArrayWithPRefixes(attribsInPkey, '$', ','); %>
<%     var phpVars = genericHelper.joinArrayWithPRefixes(attribsInPkey, '{$', '},')+'}"'; %>
<%     var phpKeyVarsInStr = genericHelper.joinArrayWithGlues(attribsInPkey, '\'{$', '}\''  ,  ',');   %>

<%     var attribsNonAutogenerated=generator.getTableFieldNamesArr(schemaName,tableName,true); %>
<%     var attribsNonAutogeneratedJoined=attribsNonAutogenerated.join(','); %>
<%     var phpArgs = genericHelper.joinArrayWithPRefixes(attribsNonAutogenerated, '$', ','); %>
<%     var phpVars = genericHelper.joinArrayWithPRefixes(generator.getTableFieldNamesArr(schemaName,tableName,true), '{$', '},')+'}"'; %>
<%     var funcName = generator.getFunctionName(schemaName,tableName,false); %>
<%     var updateLines = genericHelper.doubleArrayWithGlues(attribsNonAutogenerated, '', "}'",  "='{$"); %>
<%     var joinedUpdateLines = updateLines.join(','); %>
<li>public function <%=funcName%>Update(<%=phpArgs+','+phpArgsPkey%>){     </li>
<li>    $sql="UPDATE <%=schemaName%>.<%=tableName%>   </li>
<li>        SET                                         </li>
<li>        <%=joinedUpdateLines %>        </li>
<li>        WHERE     (<%=attribsInPkeyJoined %>)            </li>
<li>        IN      (<%=phpKeyVarsInStr%>)";                       </li>
<li>    $this->db->setAndExecQuery($sql);               </li>
<li>}                                                      </li>

<% } %>
<li>}</li>
</ol>
           
   </code>
    </pre>
 </script>
